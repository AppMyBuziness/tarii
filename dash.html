<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk with Tari</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f0ff;
            color: #4b2e83;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #6a5acd;
            padding: 1rem;
            text-align: center;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: background 0.3s, transform 0.3s;
            background: rgba(255, 255, 255, 0.2);
        }
        nav a:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }
        section {
            padding: 2rem;
            max-width: 800px;
            margin: auto;
        }
        .chat-container {
            margin-top: 2rem;
            border: 1px solid #6a5acd;
            border-radius: 8px;
            padding: 1rem;
            background-color: #ffffff;
        }
        .message-input {
            width: calc(100% - 100px);
            padding: 0.5rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: 1rem;
        }
        .send-button {
            padding: 0.5rem 1rem;
            background-color: #6a5acd;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            margin-left: 10px;
        }
        .send-button:hover {
            background-color: #5a4cad;
        }
        .slides {
            display: none;
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
        }
        .active {
            display: block;
        }
    </style>
</head>
<body>

<header>
    <h1>Talk with Tari</h1>
    <nav>
        <a href="dash.html" onclick="showPage('dashboard')">Dashboard</a>
        <a href="td.html" onclick="showPage('diary')">My Diary</a>
        <a href="" onclick="showPage('affirmations')">Events</a>
        <a href="one.html" onclick="showPage('one-on-one')">One on One</a>
        <a href="bk.html" onclick="showPage('books')">Books</a>
        <a href="videos.html" onclick="showPage('videos')">Videos</a>
    </nav>
</header>

<section id="dashboard" class="page">
    <h2 id="welcomeMessage"></h2>
    <p id="chatPrompt">Let's talk!</p>
    
    <h3>Chat</h3>
     <div class="chat-container">
            <div class="chat-header">Class Chat</div>
            <div class="message-display" id="messageDisplay">
                <!-- Messages will be displayed here -->
            </div>
            <div class="message-input">
                <input type="text" id="messageInput" placeholder="Type your message...">
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>


    <h3>Affirmations Slideshow</h3>
    <div class="slideshow-container">
        <div class="slides" id="affirmationSlide"></div>
    </div>
</section>
<script>
    function displayWelcomeMessage() {
        const username = sessionStorage.getItem('username') || 'User';
        document.getElementById('welcomeMessage').innerText = `Hey ${username}, welcome!`;
        document.getElementById('chatPrompt').innerText = `Let's talk, ${username}!`;
    }

    function loadSlideshow() {
        const affirmationsList = [
            "I am capable of achieving my goals.",
            "I embrace change and welcome new experiences.",
            "I am worthy of love and respect.",
            "I choose to focus on the positive.",
            "I believe in my abilities.",
            "I am resilient and can overcome any challenges.",
            "I attract success and abundance.",
            "I am in control of my thoughts and emotions.",
            "I radiate confidence and positivity.",
            "I am deserving of happiness and joy.",
            "I trust the process of life.",
            "I learn and grow from every experience.",
            "I am a magnet for good things.",
            "I am grateful for the abundance in my life.",
            "I am surrounded by love and support.",
            "I am making a difference in the world.",
            "I attract opportunities that align with my goals.",
            "I am strong and capable.",
            "I am constantly improving and evolving.",
            "I choose to be happy and fulfilled.",
            "I am creative and open-minded.",
            "I am at peace with my past.",
            "I am building a life I love.",
            "I am worthy of success and achievement.",
            "I am open to receiving all good things.",
            "I am confident in my decisions.",
            "I choose to let go of negativity.",
            "I am a source of inspiration for others.",
            "I believe in my dreams and pursue them.",
            "I am surrounded by endless possibilities.",
            "I am grateful for this moment.",
            "I am worthy of a beautiful life."
        ];

        const slideshowContainer = document.getElementById('affirmationSlide');
        slideshowContainer.innerHTML = '';

        affirmationsList.forEach((affirmation) => {
            slideshowContainer.innerHTML += `<div class="slides">${affirmation}</div>`;
        });
        
        startSlideshow();
    }

    function startSlideshow() {
        let slideIndex = 0;
        const slides = document.querySelectorAll('.slides');
        
        function showSlides() {
            slides.forEach(slide => slide.style.display = 'none'); // Hide all slides
            slideIndex = (slideIndex + 1) % slides.length; // Increment the index
            slides[slideIndex].style.display = 'block'; // Show the current slide
        }

        slides[slideIndex].style.display = 'block'; // Show the first slide
        setInterval(showSlides, 3000); // Change slide every 3 seconds
    }

    const maxMessages = 100; // Maximum number of messages
        const messageExpiryDays = 3; // Message expiry in days

        // Load messages from localStorage on page load
        window.onload = function() {
            const messages = JSON.parse(localStorage.getItem('chatMessages')) || [];
            const currentTime = new Date().getTime();
            
            // Display valid messages
            messages.forEach(msg => displayMessage(msg.username, msg.text, msg.timestamp));

            // Load user data
            document.getElementById('displayUsername').textContent = sessionStorage.getItem('username') || 'Username';
            document.getElementById('displayEmail').textContent = 'Email: ' + (sessionStorage.getItem('email') || 'user@example.com');
            document.getElementById('displayPronoun').textContent = 'Pronoun: ' + (sessionStorage.getItem('pronoun') || 'He/Him');
        };

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value;
            const username = sessionStorage.getItem('username') || 'User';

            if (message) {
                const newMessage = { username: username, text: message, timestamp: new Date().getTime() };
                const messages = JSON.parse(localStorage.getItem('chatMessages')) || [];
                messages.push(newMessage);
                if (messages.length > maxMessages) {
                    messages.shift(); // Remove the oldest message
                }
                localStorage.setItem('chatMessages', JSON.stringify(messages));
                displayMessage(username, message, newMessage.timestamp);
                input.value = ''; // Clear the input
                document.getElementById('messageDisplay').scrollTop = document.getElementById('messageDisplay').scrollHeight; // Scroll to the bottom
            }
        }

        function displayMessage(username, message, timestamp) {
            const display = document.getElementById('messageDisplay');
            const messageElement = document.createElement('div');
            messageElement.textContent = username + ': ' + message + ' (' + new Date(timestamp).toLocaleString() + ')';
            display.appendChild(messageElement);
        }

    // Load initial data
    displayWelcomeMessage();
    loadMessages();
    loadSlideshow();
</script>
</body>
</html>
